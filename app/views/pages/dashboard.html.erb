<div class="container h-100 py-3">
  <h1 class = "mb-3">Hello <%= current_user.first_name %></h1>
  <div class="row h-100 gap-3">
    <div class="col border border-danger rounded-3 bg-light shadow-sm overflow-auto p-4">
      <h4>Latest requests</h4>
      <% @requests.each do |request|%>
        <div class="row border border-primary rounded p-2 mb-1 bg-light">

          <div class="col-2"><img class="avatar" style="height: 50px; width:50px; object-fit:cover;" src="<%=request.user.avatar_url%>" alt=""></div>
          <div class="col d-flex align-items-center"><%=request.user.first_name%> <%=request.user.last_name%></div>
          <div class="col d-flex ms-auto justify-content-end align-items-center">
            <button type="button" class="btn btn-success me-1" data-bs-toggle="modal" data-bs-target="#request-modal">Accept</button>
            <%= button_to "delete", {:controller => :requests,
      :action => 'destroy', :id => request.id }, :method => :delete %>
          </div>
        </div>
      <%end%>
    </div>
    <div class="col border bg-light border-danger shadow-sm overflow-auto p-3 rounded">
      <h4>Latest reviews</h4>
      <p> "I had a great time. He did bite me though." <small> - Mister Peanut Butter </small></p>
      <br>
      <p> "Doesn't talk much. Kept asking me for a cardiac message but I don't have a license" <small> - Jane </small></p>
    </div>
    <div class="col-12 border border-danger rounded overflow-auto bg-light shadow-sm p-3">
      <div class="d-flex justify-content-between align-items-center p-2">
        <div>
          <h4>My listings</h4>
        </div>
        <div><%= link_to 'Create listing', new_listing_path, class: "btn btn-primary" %></div>
      </div>

      <table class="table table-borderless rounded">
        <thead>
          <tr>
            <th scope="col" >Title</th>
            <th scope="col">Description</th>
            <th scope="col">Price</th>
            <th scope="col" class="text-center">Availability</th>
            <th scope="col" class="text-center">Requests</th>
            <th scope="col">Created</th>
            <th scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <%@listings.each do |listing|%>
            <tr>
              <td>
                <a class="text-dark" href="/listings/<%=listing.id%>">
                  <%=listing.title%>
                </a>
              </td>
              <td><span class="d-inline-block text-truncate" style="max-width: 300px;"><%=listing.content%></span></td>
              <td>$<%=listing.price%> / h</td>
              <td class="text-center"><i class="<%= listing.availability ? "fa-solid fa-circle-check" : "fa-solid fa-circle-xmark"%>"></i></td>
              <td class="text-center"><%=listing.requests.count %></td>
              <td><%=listing.created_at.strftime("%F") %></td>
              <td>
                <div class="dropdown">
                  <button class="btn btn-danger dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    ...
                  </button>
                  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                  </div>
                </div>
              </tr>
            <%end%>
          </tbody>
        </table>
      </div>
    </div>
    <!--request modal-->
  </div>
